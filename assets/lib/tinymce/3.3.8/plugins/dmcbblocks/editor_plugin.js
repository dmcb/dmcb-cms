(function() {tinymce.create('tinymce.plugins.dmcbblocks', {    init : function(ed, url) {        },    createControl: function(n, cm) {        switch (n) {            case 'dmcbblocks':                var mlb = cm.createListBox('dmcbblocks', {                    title : 'Add block ----------------',                    onselect : function(v) {						// Prevent overwrite of entire document						if (tinyMCE.activeEditor.selection.getNode().nodeName != '#document')						{							tinyMCE.activeEditor.selection.setContent('%block_' + v + '%');						}                    }                });                // Add some values to the list box                // The array dmcbBlocksArray must be defined before the editor is added otherwise no control will be returned                if (typeof(window['dmcbBlocksArray']) != "undefined") {					for(i=0; i < dmcbBlocksArray.length; i++) {						mlb.add(dmcbBlocksArray[i], dmcbBlocksArray[i]);					}										// Return the new listbox instance					return mlb;				}        }        return null;    }});// Register plugin with a short nametinymce.PluginManager.add('dmcbblocks', tinymce.plugins.dmcbblocks);})();